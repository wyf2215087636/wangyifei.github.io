```
---
layout:     post
title:      "Docker ç›¸å…³æ“ä½œå‘½ä»¤"
subtitle:   "Docker ç›¸å…³æ“ä½œå‘½ä»¤"
date:       2021-01-03 00:00:00
author:     "æ‰“å·¥äºº"
header-img: "img/post-bg-2019.jpg"
tags:
    - Docker
---
```

# Docker ç›¸å…³æ“ä½œå‘½ä»¤

> æœ¬æ¬¡Dockerç›¸å…³æ“ä½œä»¥Redis ä¸ºä¾‹ï¼Œä¼šå®é™…å‘½ä»¤ + å ä½ç¬¦çš„å½¢å¼è¿›è¡Œå±•ç¤ºã€‚

**ç³»ç»Ÿ:CentOS 7.3  å†…æ ¸ 3.10 åŠä»¥ä¸Š**

**Docker æœ€æ–°ç‰ˆæœ¬= =æ²¡æ³¨æ„çœ‹ç‰ˆæœ¬å·**

> æœ¬æ–‡ç« é»˜è®¤ä½ å·²ç»å®‰è£…äº†dockerï¼Œå¦‚æœæ²¡æœ‰å®‰è£…çš„è¯ï¼Œå¯ä»¥è¿›è¡Œä¸€ä¸ªç®€å•çš„ç™¾åº¦è¿›è¡Œä¸‹è½½ï¼Œæˆ‘åˆ©ç”¨yumè¿›è¡Œä¸‹è½½  `yum install docker`

## 1.æ‹‰å–é•œåƒåˆ°æœ¬åœ°

docker pull [iamgeName]

## 2.åˆ›å»ºç›®å½•ï¼ˆå®¿ä¸»æœºï¼ŒlinuxæœåŠ¡å™¨ï¼‰

### 2.1 é…ç½®æ–‡ä»¶ç›®å½•

```linux
mkdir -p /root/docker/redis/conf
åœ¨è¯¥ç›®å½•ä¸‹æ”¾ç½®redis.conf é…ç½®æ–‡ä»¶
æ³¨ï¼šç›®å½•å¯ä»¥è‡ªå®šä¹‰
åˆ›å»ºè¯­å¥ä¸¾ä¾‹:
touch [fileName]
touch redis.conf

é…ç½®å†…å®¹å¦‚ä¸‹ï¼š
#bind 127.0.0.1 //å…è®¸è¿œç¨‹è¿æ¥
protected-mode no appendonly yes //æŒä¹…åŒ–
requirepass 123456 //å¯†ç 
```

### 2.2 æ•°æ®ç›®å½•

```linux
mkdir -p /root/docker/redis/data
```

## 3 å¯åŠ¨å®¹å™¨ï¼ŒåŠ è½½é…ç½®æ–‡ä»¶å¹¶æŒä¹…åŒ–æ•°æ®

```
docker run --name myredis -p 6379:6379 -v /root/docker/redis/data:/data -v /root/docker/redis/conf/redis.conf:/etc/redis/redis.conf -d redis redis-server /etc/redis/redis.conf
å¯ä»¥ç»‘å®šå°†é•œåƒä¸­çš„ç«¯å£ä¸å®¿ä¸»çš„ç«¯å£ç»‘å®š
-p: 6379:6379
ç»™åˆ›å»ºçš„å®¹å™¨å®šä¹‰åå­—
--name: myredis
éœ€è¦æ‰¾åˆ°redisåœ¨å®¹å™¨ä¸­çš„é…ç½®è·¯å¾„ï¼Œç„¶åå°†linuxæœåŠ¡å™¨ä¸­åˆ›å»ºçš„ç›®å½•è¿›è¡Œ":"åŒ¹é…æŒ‚è½½
-v: æŒ‚è½½è‡ªå®šä¹‰é…ç½® è‡ªå®šä¹‰é…ç½®ï¼šå®¹å™¨å†…éƒ¨é…ç½®
-d: åå°è¿è¡Œ
redis-server --appendonly yes: åœ¨å®¹å™¨æ‰§è¡Œredis-serverå¯åŠ¨å‘½ä»¤ï¼Œå¹¶æ‰“å¼€redisæŒä¹…åŒ–é…ç½®
ğŸ‘† è¿™ä¸ªæˆ‘ç”¨æ— æ•ˆ= =

docker run --name myredis -d -p 6379:6379 redis:latest --requirepass "password"
 --appendonly yes
 
 è§£é‡Š: 
 docker run å¯åŠ¨å‘½ä»¤
 --name: å®šä¹‰å®¹å™¨åç§°
 -d åå°å¯åŠ¨
 -p ç«¯å£ç»‘å®š 6379:6379
 redis:latest:ä½¿ç”¨ä»€ä¹ˆé•œåƒä»€ä¹ˆç‰ˆæœ¬è¿›è¡Œå®¹å™¨åˆ›å»º
 --requirepass "password" : å¯åŠ¨å¹¶ä¸”è®¾ç½®è®¿é—®å¯†ç 
 --appendonly yes: å¯åŠ¨æ—¶è®¾ç½®æ•°æ®ä¸ºæŒä¹…åŒ–æ•°æ®
 
 è¿™æ ·ä»”ç»†ä¸€æƒ³ï¼Œçœå»äº†é…ç½®æ–‡ä»¶ï¼Œä¹Ÿä¸ç”¨éº»çƒ¦çš„æŒ‚è½½äº†ï¼Œç¾æ»‹æ»‹ï¼ˆä¸»è¦æˆ‘ä¸ä¼šæŒ‚è½½= =ï¼‰
 


```



## 4. å¯åŠ¨æˆåŠŸï¼ŒæŸ¥çœ‹çŠ¶æ€

```
docker ps -a æŸ¥çœ‹å¯åŠ¨çŠ¶æ€æ˜¯å¦æˆåŠŸ
```

## 5. è¿›å…¥å®¹å™¨å†…éƒ¨è°ƒè¯•ï¼Œè¿›è¡Œæµ‹è¯•èƒ½å¦ä½¿ç”¨

```
docker exec -it [dockerName] redis-cli
docker exec -it myredis redis-cli

é€šè¿‡auth password è¿›è¡Œç™»å½•
```

